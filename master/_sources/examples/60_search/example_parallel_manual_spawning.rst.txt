.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_60_search_example_parallel_manual_spawning.py>`     to download the full example code
    .. rst-class:: sphx-glr-example-title

    .. _sphx_glr_examples_60_search_example_parallel_manual_spawning.py:


===========================================
Parallel Usage with manual process spawning
===========================================

*Auto-sklearn* uses *SMAC* to automatically optimize the hyperparameters of
the training models. A variant of *SMAC*, called *pSMAC* (parallel SMAC),
provides a means of running several instances of *auto-sklearn* in a parallel
mode using several computational resources (detailed information of *pSMAC*
can be found `here <https://automl.github.io/SMAC3/master/psmac.html>`_).

This example shows how to spawn multiple instances of *Auto-sklearn* which
share the same output directory and thereby run in parallel. Use this example
as a starting point to parallelize *Auto-sklearn* across multiple machines.
To run *Auto-sklearn* on a single machine check out the example
`Parallel Usage on a single machine <example_parallel_n_jobs.html>`_.


.. code-block:: default


    import multiprocessing
    import shutil

    import sklearn.model_selection
    import sklearn.datasets
    import sklearn.metrics

    from autosklearn.metrics import accuracy
    from autosklearn.classification import AutoSklearnClassifier
    from autosklearn.constants import MULTICLASS_CLASSIFICATION

    tmp_folder = '/tmp/autosklearn_parallel_2_example_tmp'
    output_folder = '/tmp/autosklearn_parallel_2_example_out'


    for dir_ in [tmp_folder, output_folder]:
        try:
            shutil.rmtree(dir_)
        except OSError:
            pass









Define utility function for multiprocessing
===========================================


.. code-block:: default


    def get_spawn_classifier(X_train, y_train):
        def spawn_classifier(seed, dataset_name):
            """Spawn a subprocess.

            auto-sklearn does not take care of spawning worker processes. This
            function, which is called several times in the main block is a new
            process which runs one instance of auto-sklearn.
            """

            # Use the initial configurations from meta-learning only in one out of
            # the four processes spawned. This prevents auto-sklearn from evaluating
            # the same configurations in four processes.
            if seed == 0:
                initial_configurations_via_metalearning = 25
                smac_scenario_args = {}
            else:
                initial_configurations_via_metalearning = 0
                smac_scenario_args = {'initial_incumbent': 'RANDOM'}

            # Arguments which are different to other runs of auto-sklearn:
            # 1. all classifiers write to the same output directory
            # 2. shared_mode is set to True, this enables sharing of data between
            # models.
            # 3. all instances of the AutoSklearnClassifier must have a different seed!
            automl = AutoSklearnClassifier(
                time_left_for_this_task=60,
                # sec., how long should this seed fit process run
                per_run_time_limit=15,
                # sec., each model may only take this long before it's killed
                ml_memory_limit=1024,
                # MB, memory limit imposed on each call to a ML algorithm
                shared_mode=True,  # tmp folder will be shared between seeds
                tmp_folder=tmp_folder,
                output_folder=output_folder,
                delete_tmp_folder_after_terminate=False,
                ensemble_size=0,
                # ensembles will be built when all optimization runs are finished
                initial_configurations_via_metalearning=(
                    initial_configurations_via_metalearning
                ),
                seed=seed,
                smac_scenario_args=smac_scenario_args,
            )
            automl.fit(X_train, y_train, dataset_name=dataset_name)
        return spawn_classifier









Data Loading
============


.. code-block:: default


    X, y = sklearn.datasets.load_breast_cancer(return_X_y=True)
    X_train, X_test, y_train, y_test = \
        sklearn.model_selection.train_test_split(X, y, random_state=1)








Build and fit the classifier
============================


.. code-block:: default


    processes = []
    spawn_classifier = get_spawn_classifier(X_train, y_train)
    for i in range(4):  # set this at roughly half of your cores
        p = multiprocessing.Process(
            target=spawn_classifier,
            args=(i, 'breast_cancer'),
        )
        p.start()
        processes.append(p)
    for p in processes:
        p.join()

    print('Starting to build an ensemble!')
    automl = AutoSklearnClassifier(
        time_left_for_this_task=30,
        per_run_time_limit=15,
        ml_memory_limit=1024,
        shared_mode=True,
        ensemble_size=50,
        ensemble_nbest=200,
        tmp_folder=tmp_folder,
        output_folder=output_folder,
        initial_configurations_via_metalearning=0,
        seed=1,
        metric=accuracy,
    )

    # Both the ensemble_size and ensemble_nbest parameters can be changed now if
    # necessary
    automl.fit_ensemble(
        y_train,
        task=MULTICLASS_CLASSIFICATION,
        precision='32',
        dataset_name='digits',
        ensemble_size=20,
        ensemble_nbest=50,
    )





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Starting to build an ensemble!
    [WARNING] [2020-09-14 17:12:58,899:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,901:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,902:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,903:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,903:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,904:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,904:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,905:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,905:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,906:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,906:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,907:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,907:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,908:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,908:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,909:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,909:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,910:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,910:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,911:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,911:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,912:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,912:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,913:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,913:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,914:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,914:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,915:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,915:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,916:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,916:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,917:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,917:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,918:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,918:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,919:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,919:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,919:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,920:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,921:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,922:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,922:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,922:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,922:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,922:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,922:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,922:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,922:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,923:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,924:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,924:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,924:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,924:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,924:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,924:EnsembleBuilder(1):digits] Interpreted str-precision as 32
    [WARNING] [2020-09-14 17:12:58,924:EnsembleBuilder(1):digits] Interpreted str-precision as 32

    AutoSklearnClassifier(delete_output_folder_after_terminate=False,
                          delete_tmp_folder_after_terminate=False,
                          disable_evaluator_output=False,
                          ensemble_memory_limit=1024, ensemble_nbest=200,
                          ensemble_size=50, exclude_estimators=None,
                          exclude_preprocessors=None, get_smac_object_callback=None,
                          include_estimators=None, include_preprocessors=None,
                          initial_configurati...
                          logging_config=None, max_models_on_disc=50,
                          metadata_directory=None, metric=None,
                          ml_memory_limit=1024, n_jobs=None,
                          output_folder='/tmp/autosklearn_parallel_2_example_out',
                          per_run_time_limit=15, resampling_strategy='holdout',
                          resampling_strategy_arguments=None, seed=1,
                          shared_mode=True, smac_scenario_args=None,
                          time_left_for_this_task=30,
                          tmp_folder='/tmp/autosklearn_parallel_2_example_tmp')



Report the score of the final ensemble
======================================


.. code-block:: default


    predictions = automl.predict(X_test)
    print(automl.show_models())
    print("Accuracy score", sklearn.metrics.accuracy_score(y_test, predictions))




.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    [(0.150000, SimpleClassificationPipeline({'balancing:strategy': 'weighting', 'classifier:__choice__': 'extra_trees', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'mean', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'robust_scaler', 'feature_preprocessor:__choice__': 'feature_agglomeration', 'classifier:extra_trees:bootstrap': 'False', 'classifier:extra_trees:criterion': 'gini', 'classifier:extra_trees:max_depth': 'None', 'classifier:extra_trees:max_features': 0.44665885784233306, 'classifier:extra_trees:max_leaf_nodes': 'None', 'classifier:extra_trees:min_impurity_decrease': 0.0, 'classifier:extra_trees:min_samples_leaf': 12, 'classifier:extra_trees:min_samples_split': 18, 'classifier:extra_trees:min_weight_fraction_leaf': 0.0, 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.0010526925520818059, 'data_preprocessing:numerical_transformer:rescaling:robust_scaler:q_max': 0.9357886313002138, 'data_preprocessing:numerical_transformer:rescaling:robust_scaler:q_min': 0.12023885364361907, 'feature_preprocessor:feature_agglomeration:affinity': 'manhattan', 'feature_preprocessor:feature_agglomeration:linkage': 'average', 'feature_preprocessor:feature_agglomeration:n_clusters': 172, 'feature_preprocessor:feature_agglomeration:pooling_func': 'max'},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.100000, SimpleClassificationPipeline({'balancing:strategy': 'weighting', 'classifier:__choice__': 'passive_aggressive', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'minmax', 'feature_preprocessor:__choice__': 'kitchen_sinks', 'classifier:passive_aggressive:C': 0.77554422882638, 'classifier:passive_aggressive:average': 'True', 'classifier:passive_aggressive:fit_intercept': 'True', 'classifier:passive_aggressive:loss': 'hinge', 'classifier:passive_aggressive:tol': 0.02071347009354619, 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.01999967026715386, 'feature_preprocessor:kitchen_sinks:gamma': 0.011708181260754043, 'feature_preprocessor:kitchen_sinks:n_components': 8770},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'random_forest', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'one_hot_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'quantile_transformer', 'feature_preprocessor:__choice__': 'no_preprocessing', 'classifier:random_forest:bootstrap': 'False', 'classifier:random_forest:criterion': 'entropy', 'classifier:random_forest:max_depth': 'None', 'classifier:random_forest:max_features': 0.14699663235614766, 'classifier:random_forest:max_leaf_nodes': 'None', 'classifier:random_forest:min_impurity_decrease': 0.0, 'classifier:random_forest:min_samples_leaf': 1, 'classifier:random_forest:min_samples_split': 7, 'classifier:random_forest:min_weight_fraction_leaf': 0.0, 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.010362166964374616, 'data_preprocessing:numerical_transformer:rescaling:quantile_transformer:n_quantiles': 1023, 'data_preprocessing:numerical_transformer:rescaling:quantile_transformer:output_distribution': 'uniform'},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'adaboost', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'none', 'feature_preprocessor:__choice__': 'select_percentile_classification', 'classifier:adaboost:algorithm': 'SAMME', 'classifier:adaboost:learning_rate': 0.3611232856502331, 'classifier:adaboost:max_depth': 3, 'classifier:adaboost:n_estimators': 235, 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.00017445320065443738, 'feature_preprocessor:select_percentile_classification:percentile': 53.86017892804136, 'feature_preprocessor:select_percentile_classification:score_func': 'chi2'},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'random_forest', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'no_coalescense', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'standardize', 'feature_preprocessor:__choice__': 'liblinear_svc_preprocessor', 'classifier:random_forest:bootstrap': 'True', 'classifier:random_forest:criterion': 'gini', 'classifier:random_forest:max_depth': 'None', 'classifier:random_forest:max_features': 0.31482574716831474, 'classifier:random_forest:max_leaf_nodes': 'None', 'classifier:random_forest:min_impurity_decrease': 0.0, 'classifier:random_forest:min_samples_leaf': 15, 'classifier:random_forest:min_samples_split': 2, 'classifier:random_forest:min_weight_fraction_leaf': 0.0, 'feature_preprocessor:liblinear_svc_preprocessor:C': 1.0, 'feature_preprocessor:liblinear_svc_preprocessor:dual': 'False', 'feature_preprocessor:liblinear_svc_preprocessor:fit_intercept': 'True', 'feature_preprocessor:liblinear_svc_preprocessor:intercept_scaling': 1, 'feature_preprocessor:liblinear_svc_preprocessor:loss': 'squared_hinge', 'feature_preprocessor:liblinear_svc_preprocessor:multi_class': 'ovr', 'feature_preprocessor:liblinear_svc_preprocessor:penalty': 'l1', 'feature_preprocessor:liblinear_svc_preprocessor:tol': 5.5234897124903465e-05},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'extra_trees', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'one_hot_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'no_coalescense', 'data_preprocessing:numerical_transformer:imputation:strategy': 'mean', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'none', 'feature_preprocessor:__choice__': 'select_percentile_classification', 'classifier:extra_trees:bootstrap': 'True', 'classifier:extra_trees:criterion': 'gini', 'classifier:extra_trees:max_depth': 'None', 'classifier:extra_trees:max_features': 0.5147672426476433, 'classifier:extra_trees:max_leaf_nodes': 'None', 'classifier:extra_trees:min_impurity_decrease': 0.0, 'classifier:extra_trees:min_samples_leaf': 2, 'classifier:extra_trees:min_samples_split': 12, 'classifier:extra_trees:min_weight_fraction_leaf': 0.0, 'feature_preprocessor:select_percentile_classification:percentile': 94.7577226911191, 'feature_preprocessor:select_percentile_classification:score_func': 'mutual_info'},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'weighting', 'classifier:__choice__': 'gradient_boosting', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'one_hot_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'no_coalescense', 'data_preprocessing:numerical_transformer:imputation:strategy': 'mean', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'none', 'feature_preprocessor:__choice__': 'no_preprocessing', 'classifier:gradient_boosting:early_stop': 'valid', 'classifier:gradient_boosting:l2_regularization': 2.4398108636363176e-05, 'classifier:gradient_boosting:learning_rate': 0.01730764045039495, 'classifier:gradient_boosting:loss': 'auto', 'classifier:gradient_boosting:max_bins': 255, 'classifier:gradient_boosting:max_depth': 'None', 'classifier:gradient_boosting:max_leaf_nodes': 405, 'classifier:gradient_boosting:min_samples_leaf': 23, 'classifier:gradient_boosting:scoring': 'loss', 'classifier:gradient_boosting:tol': 1e-07, 'classifier:gradient_boosting:n_iter_no_change': 4, 'classifier:gradient_boosting:validation_fraction': 0.3690810114678198},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'lda', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'one_hot_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'no_coalescense', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'quantile_transformer', 'feature_preprocessor:__choice__': 'pca', 'classifier:lda:n_components': 246, 'classifier:lda:shrinkage': 'manual', 'classifier:lda:tol': 5.393037707305345e-05, 'data_preprocessing:numerical_transformer:rescaling:quantile_transformer:n_quantiles': 1530, 'data_preprocessing:numerical_transformer:rescaling:quantile_transformer:output_distribution': 'uniform', 'feature_preprocessor:pca:keep_variance': 0.5561340923445729, 'feature_preprocessor:pca:whiten': 'True', 'classifier:lda:shrinkage_factor': 0.3356797590542323},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'lda', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'no_coalescense', 'data_preprocessing:numerical_transformer:imputation:strategy': 'median', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'quantile_transformer', 'feature_preprocessor:__choice__': 'select_rates_classification', 'classifier:lda:n_components': 187, 'classifier:lda:shrinkage': 'manual', 'classifier:lda:tol': 3.5652878704707626e-05, 'data_preprocessing:numerical_transformer:rescaling:quantile_transformer:n_quantiles': 1282, 'data_preprocessing:numerical_transformer:rescaling:quantile_transformer:output_distribution': 'normal', 'feature_preprocessor:select_rates_classification:alpha': 0.4321376683990276, 'feature_preprocessor:select_rates_classification:score_func': 'mutual_info_classif', 'classifier:lda:shrinkage_factor': 0.6692343788571411},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'libsvm_svc', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'one_hot_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'no_coalescense', 'data_preprocessing:numerical_transformer:imputation:strategy': 'mean', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'minmax', 'feature_preprocessor:__choice__': 'feature_agglomeration', 'classifier:libsvm_svc:C': 495.29917980405764, 'classifier:libsvm_svc:gamma': 0.282333305192461, 'classifier:libsvm_svc:kernel': 'rbf', 'classifier:libsvm_svc:max_iter': -1, 'classifier:libsvm_svc:shrinking': 'False', 'classifier:libsvm_svc:tol': 2.5845980392536503e-05, 'feature_preprocessor:feature_agglomeration:affinity': 'euclidean', 'feature_preprocessor:feature_agglomeration:linkage': 'complete', 'feature_preprocessor:feature_agglomeration:n_clusters': 376, 'feature_preprocessor:feature_agglomeration:pooling_func': 'mean'},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'bernoulli_nb', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'one_hot_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'mean', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'minmax', 'feature_preprocessor:__choice__': 'pca', 'classifier:bernoulli_nb:alpha': 4.208616488669824, 'classifier:bernoulli_nb:fit_prior': 'True', 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.0004929132198882628, 'feature_preprocessor:pca:keep_variance': 0.5341840252334011, 'feature_preprocessor:pca:whiten': 'False'},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'weighting', 'classifier:__choice__': 'sgd', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'one_hot_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'mean', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'minmax', 'feature_preprocessor:__choice__': 'no_preprocessing', 'classifier:sgd:alpha': 0.00039927077813935847, 'classifier:sgd:average': 'True', 'classifier:sgd:fit_intercept': 'True', 'classifier:sgd:learning_rate': 'constant', 'classifier:sgd:loss': 'log', 'classifier:sgd:penalty': 'l1', 'classifier:sgd:tol': 2.3026724800524452e-05, 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.0005751185552832477, 'classifier:sgd:eta0': 0.0002226431182528295},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'weighting', 'classifier:__choice__': 'liblinear_svc', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'no_coalescense', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'normalize', 'feature_preprocessor:__choice__': 'kitchen_sinks', 'classifier:liblinear_svc:C': 0.16235407389284556, 'classifier:liblinear_svc:dual': 'False', 'classifier:liblinear_svc:fit_intercept': 'True', 'classifier:liblinear_svc:intercept_scaling': 1, 'classifier:liblinear_svc:loss': 'squared_hinge', 'classifier:liblinear_svc:multi_class': 'ovr', 'classifier:liblinear_svc:penalty': 'l2', 'classifier:liblinear_svc:tol': 0.009014169873967203, 'feature_preprocessor:kitchen_sinks:gamma': 0.10872664572551757, 'feature_preprocessor:kitchen_sinks:n_components': 1828},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'passive_aggressive', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'normalize', 'feature_preprocessor:__choice__': 'pca', 'classifier:passive_aggressive:C': 7.3008316457762765, 'classifier:passive_aggressive:average': 'True', 'classifier:passive_aggressive:fit_intercept': 'True', 'classifier:passive_aggressive:loss': 'squared_hinge', 'classifier:passive_aggressive:tol': 0.00029551168529857585, 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.49038728307202795, 'feature_preprocessor:pca:keep_variance': 0.8082468706822115, 'feature_preprocessor:pca:whiten': 'True'},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'extra_trees', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'no_coalescense', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'robust_scaler', 'feature_preprocessor:__choice__': 'fast_ica', 'classifier:extra_trees:bootstrap': 'True', 'classifier:extra_trees:criterion': 'gini', 'classifier:extra_trees:max_depth': 'None', 'classifier:extra_trees:max_features': 0.8466939442511731, 'classifier:extra_trees:max_leaf_nodes': 'None', 'classifier:extra_trees:min_impurity_decrease': 0.0, 'classifier:extra_trees:min_samples_leaf': 20, 'classifier:extra_trees:min_samples_split': 11, 'classifier:extra_trees:min_weight_fraction_leaf': 0.0, 'data_preprocessing:numerical_transformer:rescaling:robust_scaler:q_max': 0.8780920883809207, 'data_preprocessing:numerical_transformer:rescaling:robust_scaler:q_min': 0.09323514638473594, 'feature_preprocessor:fast_ica:algorithm': 'deflation', 'feature_preprocessor:fast_ica:fun': 'logcosh', 'feature_preprocessor:fast_ica:whiten': 'False'},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'passive_aggressive', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'one_hot_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'median', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'normalize', 'feature_preprocessor:__choice__': 'kitchen_sinks', 'classifier:passive_aggressive:C': 0.4177635558897493, 'classifier:passive_aggressive:average': 'True', 'classifier:passive_aggressive:fit_intercept': 'True', 'classifier:passive_aggressive:loss': 'hinge', 'classifier:passive_aggressive:tol': 0.00036622547004230247, 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.3298639925115399, 'feature_preprocessor:kitchen_sinks:gamma': 0.02443001336430177, 'feature_preprocessor:kitchen_sinks:n_components': 7802},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    (0.050000, SimpleClassificationPipeline({'balancing:strategy': 'none', 'classifier:__choice__': 'random_forest', 'data_preprocessing:categorical_transformer:categorical_encoding:__choice__': 'no_encoding', 'data_preprocessing:categorical_transformer:category_coalescence:__choice__': 'minority_coalescer', 'data_preprocessing:numerical_transformer:imputation:strategy': 'most_frequent', 'data_preprocessing:numerical_transformer:rescaling:__choice__': 'standardize', 'feature_preprocessor:__choice__': 'random_trees_embedding', 'classifier:random_forest:bootstrap': 'True', 'classifier:random_forest:criterion': 'gini', 'classifier:random_forest:max_depth': 'None', 'classifier:random_forest:max_features': 0.11651522874334852, 'classifier:random_forest:max_leaf_nodes': 'None', 'classifier:random_forest:min_impurity_decrease': 0.0, 'classifier:random_forest:min_samples_leaf': 16, 'classifier:random_forest:min_samples_split': 14, 'classifier:random_forest:min_weight_fraction_leaf': 0.0, 'data_preprocessing:categorical_transformer:category_coalescence:minority_coalescer:minimum_fraction': 0.0005982492174874374, 'feature_preprocessor:random_trees_embedding:bootstrap': 'True', 'feature_preprocessor:random_trees_embedding:max_depth': 8, 'feature_preprocessor:random_trees_embedding:max_leaf_nodes': 'None', 'feature_preprocessor:random_trees_embedding:min_samples_leaf': 4, 'feature_preprocessor:random_trees_embedding:min_samples_split': 10, 'feature_preprocessor:random_trees_embedding:min_weight_fraction_leaf': 1.0, 'feature_preprocessor:random_trees_embedding:n_estimators': 45},
    dataset_properties={
      'task': 1,
      'sparse': False,
      'multilabel': False,
      'multiclass': False,
      'target_type': 'classification',
      'signed': False})),
    ]
    Accuracy score 0.958041958041958





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 1 minutes  0.450 seconds)


.. _sphx_glr_download_examples_60_search_example_parallel_manual_spawning.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: example_parallel_manual_spawning.py <example_parallel_manual_spawning.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: example_parallel_manual_spawning.ipynb <example_parallel_manual_spawning.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
